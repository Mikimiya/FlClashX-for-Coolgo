# CoolGo å®šåˆ¶ç‰ˆé›†æˆæ–¹æ¡ˆ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäº FlClashX å¼€å‘ CoolGo æœºåœºå®šåˆ¶å®¢æˆ·ç«¯ï¼Œå®ç°ç”¨æˆ·ç™»å½•ã€è®¢é˜…æ‹‰å–ã€Session ç®¡ç†ç­‰åŠŸèƒ½ã€‚

### è®¾è®¡åŸåˆ™

1. **æ’ä»¶åŒ–è®¾è®¡** - å°† CoolGo ç›¸å…³é€»è¾‘å°è£…ä¸ºç‹¬ç«‹æ¨¡å— `lib/coolgo/`
2. **æœ€å°ä¾µå…¥æ€§** - å°½é‡ä¸ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œé€šè¿‡æ‰©å±•å®ç°
3. **å¯é…ç½®åŒ–** - æ”¯æŒå¼€å…³ CoolGo åŠŸèƒ½ï¼ŒåŸæœ‰åŠŸèƒ½ä¸å—å½±å“
4. **å‘åå…¼å®¹** - ä¾¿äºåç»­ç‰ˆæœ¬æ›´æ–°å’Œç»´æŠ¤

---

## ğŸ”§ API æ¥å£å®šä¹‰

### åŸºç¡€é…ç½®

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| ç½‘ç«™åœ°å€ | https://coolgo.network |
| æ³¨å†Œåœ°å€ | https://coolgo.network/register?trial=1&productId=5 |
| æ‰¾å›å¯†ç  | https://coolgo.network/forgot-password |

### API åœ°å€ï¼ˆå¤šåœ°å€è½®è¯¢ï¼‰

**ç”Ÿäº§ç¯å¢ƒï¼š**
```
https://billing.coolgo.network
https://billing.coolgo.cloud
https://billing.coolgo.cc
```

**æµ‹è¯•ç¯å¢ƒï¼š**
```
http://localhost:3010
```

### æ¥å£åˆ—è¡¨

#### 1. ç™»å½•æ¥å£

- **è·¯å¾„**: `POST /auth/login`
- **è¯·æ±‚ä½“**:
```json
{
  "email": "user@example.com",
  "password": "user123"
}
```
- **å“åº”**:
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 15,
      "email": "user@example.com",
      "emailVerified": true,
      "role": "USER",
      "isAdmin": false,
      "balance": "0",
      "affiliateCode": "C80A121B"
    }
  }
}
```

#### 2. è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£

- **è·¯å¾„**: `GET /user/profile`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <token>`
- **å“åº”**:
```json
{
  "success": true,
  "data": {
    "email": "user@example.com",
    "name": "",
    "isVerified": true,
    "isAdmin": false,
    "balance": 0,
    "isAutoRenew": true,
    "hasUsedTrial": true,
    "hasActiveSubscription": false,
    "remnawaveInfo": {
      "expireAt": "2026-03-31T15:03:00.000Z",
      "hwidDeviceLimit": 10,
      "planName": "é«˜çº§å¥—é¤",
      "status": "ACTIVE",
      "subscriptionUrl": "https://subscription.get-polar.com/RE2F88M-o_oVP9q0",
      "trafficLimitBytes": 721554505728,
      "trafficLimitStrategy": "MONTH",
      "usedDevices": 2,
      "userTraffic": {
        "firstConnectedAt": "2026-02-06T16:31:15.170Z",
        "lastConnectedNodeUuid": "f7e4f03f-ddca-4d22-b664-fe1d6a2cef8a",
        "lifetimeUsedTrafficBytes": 5579596206,
        "onlineAt": "2026-02-12T14:41:00.268Z",
        "usedTrafficBytes": 5579596206
      },
      "username": "user_email_com",
      "uuid": "20bcf644-da61-4aa4-9303-369e7992f770"
    },
    "createdAt": "2026-02-05 18:04:28"
  }
}
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
lib/
â”œâ”€â”€ coolgo/                              # CoolGo ä¸“å±æ¨¡å—
â”‚   â”œâ”€â”€ coolgo.dart                      # æ¨¡å—ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ config.dart                      # é…ç½®å¸¸é‡
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                          # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ models.dart                  # æ¨¡å‹å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ auth_result.dart             # ç™»å½•å“åº”æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.dart                    # ç”¨æˆ·åŸºç¡€ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ user_profile.dart            # ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
â”‚   â”‚   â””â”€â”€ remnawave_info.dart          # è®¢é˜…ä¿¡æ¯
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                        # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ services.dart                # æœåŠ¡å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ api_client.dart              # API å®¢æˆ·ç«¯ï¼ˆå¤šåœ°å€è½®è¯¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ auth_service.dart            # è®¤è¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ subscription_manager.dart    # è®¢é˜…ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/                       # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ providers.dart               # Provider å¯¼å‡º
â”‚   â”‚   â””â”€â”€ auth_provider.dart           # è®¤è¯çŠ¶æ€ Provider
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                           # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ utils.dart                   # å·¥å…·å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ session_manager.dart         # Session æŒä¹…åŒ–
â”‚   â”‚   â””â”€â”€ jwt_utils.dart               # JWT è§£æå·¥å…·
â”‚   â”‚
â”‚   â””â”€â”€ views/                           # UI è§†å›¾
â”‚       â”œâ”€â”€ views.dart                   # è§†å›¾å¯¼å‡º
â”‚       â”œâ”€â”€ login_page.dart              # ç™»å½•é¡µé¢
â”‚       â””â”€â”€ widgets/
â”‚           â””â”€â”€ home_button.dart         # "å›åŸ"æŒ‰é’®
```

---

## ğŸ” Token ç”Ÿå‘½å‘¨æœŸç®¡ç†

### è¿‡æœŸæ£€æµ‹æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å¯åŠ¨                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  æ£€æŸ¥æœ¬åœ° Token å­˜åœ¨ï¼Ÿ  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ æ˜¯                          â”‚ å¦
           â–¼                             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ JWT æœ¬åœ°è¿‡æœŸæ£€æŸ¥ â”‚          â”‚   è·³è½¬ç™»å½•é¡µ    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚ å·²è¿‡æœŸ      â”‚ æœªè¿‡æœŸ
    â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚è·³è½¬ç™»å½•â”‚   â”‚ è°ƒç”¨ /user/profile â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   éªŒè¯ Token     â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 401 é”™è¯¯      â”‚ æˆåŠŸ
              â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚è·³è½¬ç™»å½•â”‚     â”‚ è¿›å…¥ä¸»ç•Œé¢ â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API è¯·æ±‚æ‹¦æˆª

- æ‰€æœ‰ CoolGo API è¯·æ±‚é€šè¿‡ Dio æ‹¦æˆªå™¨ç›‘å¬
- é‡åˆ° 401 çŠ¶æ€ç è‡ªåŠ¨æ¸…é™¤ Session å¹¶è·³è½¬ç™»å½•é¡µ
- æä¾›å‹å¥½çš„"ç™»å½•å·²è¿‡æœŸ"æç¤º

---

## ğŸ“¦ è®¢é˜…ç®¡ç†ç­–ç•¥

### æ–¹æ¡ˆï¼šæ ‡è®° + æ™ºèƒ½æ›´æ–°

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| é¦–æ¬¡ç™»å½• | åˆ›å»ºæ–°è®¢é˜…ï¼Œæ‰“ä¸Š `x-coolgo-managed` æ ‡è®° |
| å†æ¬¡ç™»å½•ï¼ˆåŒè´¦å·ï¼‰ | æ›´æ–°è®¢é˜… URLï¼Œä¿ç•™ç”¨æˆ·è®¾ç½®ï¼ˆä»£ç†ç»„é€‰æ‹©ç­‰ï¼‰ |
| åˆ‡æ¢è´¦å· | æ›´æ–°å·²æœ‰è®¢é˜…ä¸ºæ–°è´¦å·çš„è®¢é˜…åœ°å€ |
| ç”¨æˆ·æ‰‹åŠ¨åˆ é™¤è®¢é˜… | ä¸‹æ¬¡ç™»å½•é‡æ–°åˆ›å»º |

### è®¢é˜…è¯†åˆ«

é€šè¿‡ `SharedPreferences` å­˜å‚¨ CoolGo ç®¡ç†çš„ Profile IDï¼š
- Key: `coolgo_profile_id`
- Value: Profile çš„å”¯ä¸€æ ‡è¯†ç¬¦

---

## ğŸ¨ UI è®¾è®¡

### ç™»å½•é¡µé¢

- **Logo**: CoolGo å“ç‰Œ Logo
- **è¾“å…¥æ¡†**: é‚®ç®±ã€å¯†ç 
- **é€‰é¡¹**: è®°ä½å¯†ç å¤é€‰æ¡†
- **æŒ‰é’®**: ç™»å½•ã€æ³¨å†Œï¼ˆè·³è½¬ç½‘é¡µï¼‰ã€æ‰¾å›å¯†ç ï¼ˆè·³è½¬ç½‘é¡µï¼‰
- **è·³è¿‡**: å³ä¸Šè§’"è·³è¿‡ç™»å½•"é€‰é¡¹ï¼ˆä½¿ç”¨åŸæœ‰åŠŸèƒ½ï¼‰

### ä»ªè¡¨ç›˜"å›åŸ"æŒ‰é’®

- ä½ç½®: ä»ªè¡¨ç›˜å³ä¸Šè§’ actions åŒºåŸŸ
- å›¾æ ‡: ğŸ  æˆ–è‡ªå®šä¹‰å›¾æ ‡
- åŠŸèƒ½: ç‚¹å‡»æ‰“å¼€ https://coolgo.network

---

## ğŸ“ å®æ–½ä»»åŠ¡æ¸…å•

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„ âœ…
- [x] åˆ›å»ºæ–¹æ¡ˆæ–‡æ¡£
- [ ] åˆ›å»º coolgo æ¨¡å—ç›®å½•ç»“æ„
- [ ] å®šä¹‰é…ç½®å¸¸é‡ (`config.dart`)
- [ ] åˆ›å»ºæ•°æ®æ¨¡å‹

### é˜¶æ®µäºŒï¼šæœåŠ¡å±‚
- [ ] å®ç° API å®¢æˆ·ç«¯ï¼ˆå¤šåœ°å€è½®è¯¢ï¼‰
- [ ] å®ç°è®¤è¯æœåŠ¡
- [ ] å®ç° Session ç®¡ç†
- [ ] å®ç°è®¢é˜…ç®¡ç†å™¨

### é˜¶æ®µä¸‰ï¼šçŠ¶æ€ç®¡ç†
- [ ] åˆ›å»ºè®¤è¯çŠ¶æ€ Provider
- [ ] å®ç° Token è¿‡æœŸç›‘å¬

### é˜¶æ®µå››ï¼šUI å®ç°
- [ ] ç™»å½•é¡µé¢
- [ ] "å›åŸ"æŒ‰é’®ç»„ä»¶

### é˜¶æ®µäº”ï¼šé›†æˆ
- [ ] ä¿®æ”¹åº”ç”¨å…¥å£ï¼ˆæœ€å°æ”¹åŠ¨ï¼‰
- [ ] é›†æˆ"å›åŸ"æŒ‰é’®åˆ°ä»ªè¡¨ç›˜
- [ ] å®Œæ•´æµç¨‹æµ‹è¯•

---

## ğŸ”„ åŸæœ‰ä»£ç ä¿®æ”¹æ¸…å•

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | å½±å“ç¨‹åº¦ |
|------|----------|----------|
| `lib/application.dart` | å¯åŠ¨æ—¶æ£€æŸ¥ CoolGo ç™»å½•çŠ¶æ€ | æå° |
| `lib/views/dashboard/dashboard.dart` | æ·»åŠ "å›åŸ"æŒ‰é’® | æå° |
| `.github/workflows/build.yaml` | æ·»åŠ  build_runner ä»£ç ç”Ÿæˆæ­¥éª¤ | æ—  |
| `build.yaml` | æ·»åŠ  coolgo æ¨¡å—çš„ä»£ç ç”Ÿæˆé…ç½® | æ—  |

---

## ğŸ”¨ æ„å»ºè¯´æ˜

### GitHub Actions è‡ªåŠ¨æ„å»º

ä»£ç ç”Ÿæˆå·²é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼Œæ— éœ€æœ¬åœ°è¿è¡Œ `build_runner`ã€‚

GitHub Actions ä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨æ‰§è¡Œï¼š
```bash
dart run build_runner build --delete-conflicting-outputs
```

### æœ¬åœ°å¼€å‘ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æœ¬åœ°æµ‹è¯•ï¼Œè¿è¡Œï¼š
```bash
flutter pub get
dart run build_runner build --delete-conflicting-outputs
```

---

## ğŸ“… ç‰ˆæœ¬è®¡åˆ’

### v1.0 (å½“å‰)
- ç™»å½•/è®¤è¯ç³»ç»Ÿ
- è‡ªåŠ¨æ‹‰å–è®¢é˜…
- Session ç®¡ç†
- "å›åŸ"æŒ‰é’®

### v1.1 (è§„åˆ’)
- ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- æµé‡ç»Ÿè®¡æ˜¾ç¤º
- å¥—é¤åˆ°æœŸæé†’

### v1.2 (è§„åˆ’)
- å¤šè®¾å¤‡ç®¡ç†
- åœ¨çº¿å®¢æœå…¥å£

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*
*æ›´æ–°æ—¥æœŸ: 2026-02-12*
